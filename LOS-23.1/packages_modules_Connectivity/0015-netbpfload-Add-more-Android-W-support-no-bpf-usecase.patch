From b832b52f108c3af55503a5c639861275d16d14c1 Mon Sep 17 00:00:00 2001
From: Dominggoes Isakh <drjisakh@gmail.com>
Date: Sun, 30 Nov 2025 13:08:24 +0100
Subject: [PATCH 15/18] netbpfload: Add more Android W support no-bpf usecase

Change-Id: I697dbf88edf64552ce0ce8577b7b8f107340dda4
---
 bpf/loader/NetBpfLoad.cpp | 14 +++++---------
 1 file changed, 5 insertions(+), 9 deletions(-)

diff --git a/bpf/loader/NetBpfLoad.cpp b/bpf/loader/NetBpfLoad.cpp
index db914de593..e57626dbf7 100644
--- a/bpf/loader/NetBpfLoad.cpp
+++ b/bpf/loader/NetBpfLoad.cpp
@@ -1637,28 +1637,24 @@ static int doLoad(char** argv, char * const envp[]) {
 
     // both S and T require kernel 4.9 (and eBpf support)
     if (!isAtLeastKernelVersion(4, 9, 0)) {
-        ALOGE("Android S & T require kernel 4.9.");
-        return 1;
+        ALOGW("IGNORING: Android S & T require kernel 4.9.");
     }
 
     // U bumps the kernel requirement up to 4.14
     if (isAtLeastU && !isAtLeastKernelVersion(4, 14, 0)) {
-        ALOGE("Android U requires kernel 4.14.");
-        return 1;
+        ALOGW("IGNORING: Android U requires kernel 4.14.");
     }
 
     // V bumps the kernel requirement up to 4.19
     // see also: //system/netd/tests/kernel_test.cpp TestKernel419
     if (isAtLeastV && !isAtLeastKernelVersion(4, 19, 0)) {
-        ALOGE("Android V requires kernel 4.19.");
-        return 1;
+        ALOGW("IGNORING: Android V requires kernel 4.19.");
     }
 
     // 25Q2 bumps the kernel requirement up to 5.4
     // see also: //system/netd/tests/kernel_test.cpp TestKernel54
     if (isAtLeast25Q2 && !isAtLeastKernelVersion(5, 4, 0)) {
-        ALOGE("Android 25Q2 requires kernel 5.4.");
-        return 1;
+        ALOGW("IGNORING: Android 25Q2 requires kernel 5.4.");
     }
 
     // 25Q4 bumps the kernel requirement up to 5.10
@@ -1717,7 +1713,7 @@ static int doLoad(char** argv, char * const envp[]) {
 #undef REQUIRE
 
         if (bad) {
-            ALOGE("Unsupported kernel version (%07x).", kernelVersion());
+            ALOGE("IGNORING: Unsupported kernel version (%07x).", kernelVersion());
         }
     }
 
-- 
2.51.0

